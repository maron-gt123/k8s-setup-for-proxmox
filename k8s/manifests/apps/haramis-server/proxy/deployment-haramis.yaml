apiVersion: apps/v1
kind: Deployment
metadata:
  name: mc-proxy
  labels:
    app: mc-proxy
spec:
  template:
    spec:
      containers:
        - name: mc-proxy
          resources:
            requests:
              memory: "2048Mi"
          env:
            - name: CFG_LUCKPERMS_SERVER_NAME
              value: proxy
            - name: MEMORY
              value: 2048m
            - name: CFG_SERVER_LOBBY_URL
              valueFrom:
                secretKeyRef:
                  name: minecraft-lobby-secret
                  key: CFG_SERVER_URL
            - name: CFG_SERVER_S1_URL
              valueFrom:
                secretKeyRef:
                  name: minecraft-s1-secret
                  key: CFG_SERVER_URL
            - name: CFG_SERVER_S2_URL
              valueFrom:
                secretKeyRef:
                  name: minecraft-s2-secret
                  key: CFG_SERVER_URL
            - name: CFG_SERVER_S3_URL
              valueFrom:
                secretKeyRef:
                  name: minecraft-s3-secret
                  key: CFG_SERVER_URL
            - name: CFG_SERVER_EXP_URL
              valueFrom:
                secretKeyRef:
                  name: minecraft-exp-disney-secret
                  key: CFG_SERVER_URL
            - name: CFG_PROXY_ENABLE
              value: "true"
            - name: ICON
              value: "https://raw.githubusercontent.com/maron-gt123/k8s-setup-for-proxmox/main/k8s/manifests/apps/haramis-server/proxy/config/server-icon.png"
