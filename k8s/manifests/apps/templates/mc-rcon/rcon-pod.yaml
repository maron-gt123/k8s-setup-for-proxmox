apiVersion: v1
kind: Pod
metadata:
  name: ubuntu-rcon
  labels:
    app: ubuntu-rcon
spec:
  containers:
    - name: ubuntu
      image: ubuntu:24.04
      command: ["/bin/bash", "-c"]
      args:
        - |
          set -eux
          apt update
          apt install -y curl tar
          # 最新リリースを取得してrcon-cliを配置
          curl -L -o /tmp/rcon-cli.tar.gz https://github.com/itzg/rcon-cli/releases/latest/download/rcon-cli_linux_amd64.tar.gz
          tar -xzf /tmp/rcon-cli.tar.gz -C /usr/local/bin
          chmod +x /usr/local/bin/rcon-cli
          echo "✅ rcon-cli installed"
          sleep infinity
      tty: true
      stdin: true
      resources:
        requests:
          cpu: 50m
          memory: 64Mi
  restartPolicy: Always
